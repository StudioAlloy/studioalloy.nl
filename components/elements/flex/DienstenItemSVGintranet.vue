<template>
  <svg id="DienstIntranet" viewBox="0 0 700 400" style="fill-rule:evenodd;clip-rule:evenodd;" @click="interactiveMorph">
    <g id="base">
      <g id="bar">
        <path d="M68.337,15.557L627.663,15.557C628.893,15.557 629.339,15.685 629.789,15.925C630.238,16.165 630.591,16.518 630.832,16.967C631.072,17.417 631.2,17.863 631.2,19.092L631.2,45.89L64.8,45.89L64.8,19.092C64.8,17.863 64.928,17.417 65.168,16.967C65.409,16.518 65.762,16.165 66.211,15.925C66.661,15.685 67.107,15.557 68.337,15.557Z" style="fill:#e2e3e5;fill-rule:nonzero;" />
        <ellipse cx="80.112" cy="30.861" rx="3.449" ry="3.447" style="fill:#c4c6ca;" />
        <ellipse cx="92.527" cy="30.861" rx="3.449" ry="3.447" style="fill:#c4c6ca;" />
        <ellipse cx="104.942" cy="30.861" rx="3.449" ry="3.447" style="fill:#c4c6ca;" />
        <path d="M123.953,23.829L615.637,23.829C616.252,23.829 616.475,23.893 616.7,24.014C616.925,24.134 617.101,24.31 617.221,24.535C617.342,24.759 617.406,24.982 617.406,25.597L617.406,35.85C617.406,36.464 617.342,36.687 617.221,36.912C617.101,37.136 616.925,37.313 616.7,37.433C616.475,37.553 616.252,37.617 615.637,37.617L123.953,37.617C123.338,37.617 123.115,37.553 122.891,37.433C122.666,37.313 122.489,37.136 122.369,36.912C122.249,36.687 122.185,36.464 122.185,35.85L122.185,25.597C122.185,24.982 122.249,24.759 122.369,24.535C122.489,24.31 122.666,24.134 122.891,24.014C123.115,23.893 123.338,23.829 123.953,23.829Z" style="fill:#fff;fill-rule:nonzero;" />
      </g>
      <rect id="background" x="64.8" y="45.89" width="566.4" height="354.069" style="fill:#ededed;" />
    </g>
    <g id="sidebar">
      <rect x="64.8" y="45.89" width="95.411" height="354.069" style="fill:#0c162d;" />
      <path d="M76.663,68.777L136.186,68.777" style="fill:none;stroke:#233b72;stroke-width:7.72px;" />
      <path d="M76.663,101.868L132.084,101.868M76.663,118.413L136.186,118.413M76.663,134.959L139.485,134.959M76.663,151.504L129.115,151.504M76.663,168.049L142.157,168.049" style="fill:none;stroke:#233b72;stroke-width:4.41px;" />
      <g id="interactive">
        <circle cx="160.211" cy="69.053" r="11.03" style="fill:#f53;" />
        <path d="M154.919,72.348C155.057,72.024 155.225,71.716 155.419,71.427C155.983,70.582 156.766,69.896 157.687,69.45C157.074,68.823 156.696,67.964 156.696,67.018C156.696,65.096 158.253,63.538 160.175,63.538C162.097,63.538 163.655,65.096 163.655,67.018C163.655,67.964 163.277,68.823 162.663,69.45C163.905,70.051 164.896,71.088 165.438,72.362" style="fill:none;stroke:#fff;stroke-width:1px;stroke-linecap:round;stroke-linejoin:round;" />
      </g>
      <rect x="102.854" y="358.596" width="19.854" height="19.854" style="fill:#233b72;" />
    </g>
    <g id="design">
      <g id="text">
        <path d="M185.311,68.777L290.049,68.777" style="fill:none;stroke:#bfbfbf;stroke-width:7.72px;" />
        <path d="M185.311,93.044L309.67,93.044M185.311,104.074L292.573,104.074M185.311,115.104L300.846,115.104M185.311,126.134L287.35,126.134M185.311,137.165L304.151,137.165" style="fill:none;stroke:#bfbfbf;stroke-width:4.41px;" />
      </g>
      <g id="data">
        <rect x="326.767" y="58.574" width="287.336" height="88.241" style="fill:#d8d8d8;" />
        <g id="graph">
          <path d="M371.991,125.524L400.216,106.715L421.606,116.174C452.326,91.746 467.685,79.532 467.685,79.532C467.685,79.532 475.979,88.148 492.565,105.379L527.388,112.008L549.771,125.524L371.991,125.524Z" style="fill:#ededed;" />
          <path d="M392.753,125.524L420.978,106.715L442.369,116.174C473.088,91.746 488.448,79.532 488.448,79.532C488.448,79.532 496.741,88.148 513.328,105.379L548.151,112.008L570.534,125.524L392.753,125.524Z" style="fill:#bfbfbf;" />
        </g>
      </g>
      <g id="list">
        <g>
          <rect x="185.581" y="179.907" width="28.678" height="28.678" style="fill:#bfbfbf;" />
          <rect x="230.253" y="179.907" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="230.253" y="208.033" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="230.253" y="236.16" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="230.253" y="264.287" width="156.629" height="16.545" style="fill:#d8d8d8;" />
        </g>
        <g>
          <rect x="412.802" y="179.907" width="28.678" height="28.678" style="fill:#bfbfbf;" />
          <rect x="457.475" y="179.907" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="457.475" y="208.033" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="457.475" y="236.16" width="156.629" height="16.545" style="fill:#d8d8d8;" />
          <rect x="457.475" y="264.287" width="156.629" height="16.545" style="fill:#d8d8d8;" />
        </g>
      </g>
      <g id="text-block">
        <rect x="185.581" y="305.099" width="127.95" height="94.86" style="fill:#d8d8d8;" />
        <path d="M200.753,320.817L299.104,320.817M200.753,331.847L299.104,331.847M200.753,342.878L299.104,342.878M200.753,353.908L299.104,353.908M200.753,364.938L299.104,364.938M200.753,375.968L299.104,375.968M200.753,386.998L299.104,386.998M200.753,398.028L299.104,398.028" style="fill:none;stroke:#bfbfbf;stroke-width:4.41px;" />
      </g>
      <g id="items">
        <g>
          <rect x="325.664" y="304.614" width="288.439" height="36.4" style="fill:#d8d8d8;" />
          <rect x="333.937" y="311.784" width="22.06" height="22.06" style="fill:#bfbfbf;" />
          <rect x="588.734" y="318.953" width="7.721" height="7.721" style="fill:#bfbfbf;" />
          <path d="M372.272,316.472L543.615,316.472" style="fill:none;stroke:#bfbfbf;stroke-width:5.52px;" />
          <path d="M372.272,327.502L512.288,327.502" style="fill:none;stroke:#bfbfbf;stroke-width:4.41px;" />
        </g>
        <g>
          <rect x="325.664" y="346.529" width="288.439" height="36.4" style="fill:#d8d8d8;" />
          <rect x="333.937" y="353.699" width="22.06" height="22.06" style="fill:#bfbfbf;" />
          <rect x="588.734" y="360.868" width="7.721" height="7.721" style="fill:#bfbfbf;" />
          <path d="M372.272,358.386L543.615,358.386" style="fill:none;stroke:#bfbfbf;stroke-width:5.52px;" />
          <path d="M372.272,369.417L512.288,369.417" style="fill:none;stroke:#bfbfbf;stroke-width:4.41px;" />
        </g>
        <g>
          <rect x="325.664" y="388.444" width="288.439" height="36.4" style="fill:#d8d8d8;" />
          <rect x="333.937" y="395.613" width="22.06" height="22.06" style="fill:#bfbfbf;" />
          <path d="M372.272,400.301L543.615,400.301" style="fill:none;stroke:#bfbfbf;stroke-width:5.52px;" />
        </g>
      </g>
    </g>
    <g id="animate-in">
      <rect x="204.472" y="80.401" width="355.177" height="276.993" style="fill:#0c162d;" />
      <g id="footer">
        <path d="M242.262,310.205L407.574,310.205" style="fill:none;fill-rule:nonzero;stroke:#233b72;stroke-width:8px;stroke-miterlimit:10;" />
        <path d="M242.262,321.375L384.852,321.375" style="fill:none;fill-rule:nonzero;stroke:#233b72;stroke-width:8px;stroke-miterlimit:10;" />
      </g>
      <g id="form">
        <rect x="242.447" y="174.78" width="139.614" height="17.871" style="fill:#233b72;" />
        <rect x="390.437" y="174.78" width="139.614" height="17.871" style="fill:#233b72;" />
        <rect x="242.447" y="201.028" width="287.604" height="17.871" style="fill:#233b72;" />
        <rect x="242.447" y="227.275" width="287.604" height="17.871" style="fill:#233b72;" />
        <rect x="242.447" y="253.522" width="195.459" height="17.871" style="fill:#233b72;" />
        <rect x="445.724" y="253.522" width="84.327" height="17.871" style="fill:#233b72;" />
      </g>
      <g id="button">
        <rect x="476.997" y="341.758" width="53.053" height="22.338" style="fill:#f53;" />
        <path d="M498.219,352.775L502.867,357.395L509.388,349.018" style="fill:none;fill-rule:nonzero;stroke:#fff;stroke-width:1px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" />
      </g>
      <g id="header">
        <path d="M242.25,125.357L422.517,125.357" style="fill:none;fill-rule:nonzero;stroke:#233b72;stroke-width:14px;stroke-miterlimit:10;" />
        <path d="M242.25,107.487L476.989,107.487" style="fill:none;fill-rule:nonzero;stroke:#233b72;stroke-width:14px;stroke-miterlimit:10;" />
        <path d="M242.262,146.02L494.06,146.02" style="fill:none;fill-rule:nonzero;stroke:#233b72;stroke-width:8px;stroke-miterlimit:10;" />
      </g>
      <g id="morph-interactive">
        <circle cx="213.407" cy="83.194" r="16.754" style="fill:#f53;" />
        <path d="M205.369,88.198C205.579,87.706 205.834,87.238 206.128,86.799C206.985,85.516 208.174,84.474 209.573,83.797C208.641,82.844 208.067,81.54 208.067,80.102C208.067,77.183 210.433,74.817 213.352,74.817C216.271,74.817 218.638,77.183 218.638,80.102C218.638,81.54 218.063,82.844 217.132,83.797C219.017,84.71 220.523,86.285 221.346,88.22" style="fill:none;fill-rule:nonzero;stroke:#fff;stroke-width:1px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" />
      </g>
    </g>
  </svg>

</template>

<script>
export default {
  props: ["slug"],
  name: "DienstenItemSVGintranet",
  data() {
    return {};
  }, // End data
  mounted() {
    // this.$nextTick(this.timelineDienstIntranet);
    this.$nextTick(() => {
      this.timelineDienstIntranet();
      this.tlMorph = new this.$GSAP.TimelineMax();
    });
  },
  methods: {
    timelineDienstIntranet() {
      //------------------------------------------------------//
      // Timeline â‡ï¸ ðŸ§¦ GSAP
      //------------------------------------------------------//
      // Basic values
      // Basic values
      const baseTiming = 0.3;
      // Timeline stuf
      const timelineDienstIntranet = new this.$GSAP.TimelineMax();
      // Base ease full timeline

      timelineDienstIntranet
        .set("#DienstIntranet #animate-in", { autoAlpha: 0 })
        .from("#DienstIntranet #base", baseTiming * 2, { y: 500 })
        .from("#DienstIntranet #sidebar", baseTiming * 2, {
          scaleX: 0,
          transformOrigin: "center",
        })
        .staggerFrom(
          "#DienstIntranet #sidebar *",
          baseTiming * 2,
          { y: 50, opacity: 0 },
          baseTiming,
          "sameTime",
        )
        .from("#DienstIntranet #interactive", baseTiming * 4, {
          scale: 0,
          transformOrigin: "center",
          ease: Elastic.easeOut.config(1, 0.3),
        })
        .staggerFrom(
          "#DienstIntranet #design > *",
          baseTiming * 2,
          { y: 50, opacity: 0 },
          baseTiming,
          "sameTime",
        )
        .staggerFrom(
          "#DienstIntranet #list * *",
          baseTiming * 2,
          { y: 50, opacity: 0 },
          0.2,
          "sameTime",
        )
        .staggerFrom(
          "#DienstIntranet #items > *",
          baseTiming * 2,
          { y: 50, opacity: 0 },
          baseTiming,
          "sameTime",
        )
        .add(alloyLoopingAnimation);
      // END Timeline â‡ï¸ ðŸ§¦  GSAP -------------------------------------//
      //------------------------------------------------------//
      // âž° Looping timeline ï¸â‡ï¸ï¸ ðŸ§¦  GSAP
      //------------------------------------------------------//
      const loopInteractive = new this.$GSAP.TimelineMax({
        repeat: -1,
        // yoyo: true,
        repeatDelay: baseTiming * 8,
      });
      function alloyLoopingAnimation() {
        loopInteractive
          .to("#DienstIntranet #interactive", baseTiming * 2, {
            scale: 0.8,
            transformOrigin: "center",
          })
          .to("#DienstIntranet #interactive", baseTiming * 4, {
            // scale: "+=0.2",
            scale: 1,
            transformOrigin: "center",
            ease: Elastic.easeOut.config(1, 0.3),
          });
        return loopInteractive;
      }

      // END âž° Looping timeline ï¸â‡ï¸ï¸ ðŸ§¦  GSAP -------------------------------------//
      //------------------------------------------------------//
      // ðŸŽ© ScrollMagic scene
      //------------------------------------------------------//
      const controller = new this.$ScrollMagic.Controller();
      const scene = new this.$ScrollMagic.Scene({
        triggerElement: "svg#DienstIntranet",
        offset: -200,
        reverse: false,
      })
        .setTween(timelineDienstIntranet)
        .addTo(controller);
      // ENDcontrollerMagic scene -------------------------------------//
    },
    interactiveMorph() {
      const baseTiming = 0.3;
      /* Convert un-morphable shapes to path ----------------------------------------- */
      // MorphSVGPlugin.convertToPath(
      //   "circle, rect, ellipse, line, polygon, polyline",
      // );
      // const tlMorph = new this.$GSAP.TimelineMax();

      // What ðŸ” direction should the animation play ----------------------------------------- /
      // this.tlMorph.eventCallback("onComplete", tlDirection);
      const tlDirection = () => {
        this.played = !this.played;
      };
      // this.played ? this.tlMorph.reverse() : this.tlMorph.play();
      if (this.played) {
        this.tlMorph.reverse();
        tlDirection();
      } else {
        this.tlMorph.play();
        this.tlMorph
          .set("#DienstIntranet #animate-in", { autoAlpha: 1 })
          .from("#DienstIntranet #animate-in", baseTiming * 2, {
            scale: 0,
            transformOrigin: "center",
            // ease: Elastic.easeOut.config(1, 0.3),
          })
          .staggerFrom(
            "#DienstIntranet #animate-in #header *",
            baseTiming * 2,
            {
              scaleX: 0,
            },
            0.1,
            `-=${baseTiming}`,
          )
          .staggerFrom(
            "#DienstIntranet #animate-in #form *",
            baseTiming * 2,
            {
              scaleX: 0,
            },
            0.2,
            `-=${baseTiming}`,
          )
          .staggerFrom(
            "#DienstIntranet #animate-in #footer *",
            baseTiming * 2,
            {
              scaleX: 0,
            },
            0.1,
            `-=${baseTiming}`,
          )
          .from("#DienstIntranet #animate-in #button", baseTiming * 2, {
            scale: 0,
            transformOrigin: "center",
            ease: Elastic.easeOut.config(1, 0.3),
          })
          .add(function() {
            tlDirection();
          })
          .to(
            "#DienstIntranet #interactive ellipses",
            baseTiming * 2,
            {
              morphSVG: "#DienstIntranet #morph-interactive ellipses",
            },
            "sameTime",
          );
      }
    },
  },
};
</script>